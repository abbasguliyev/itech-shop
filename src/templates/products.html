{% extends 'partials/_base.html' %}
{% load static %}
{% block content %}
<div class="div-first-a">
    <div class="cover-a">
      <img class="cover-img-a" src="{% static 'images/cover_img.jpeg' %}" />
    </div>
    <div class="cov-div-a">
      <div class="cov-div-p-a">
        <p class="cov-p-a">Məhsullar</p>
      </div>
    </div>
</div>
<div class="products-varieties">
    <div class="varieties">
        <form action="{% url 'products' %}" method="GET" class="select-form">
            {{ filter.form.category }}
            {{ filter.form.name }}
            <button class="search-btn" type="submit">
                <i class="fas fa-search search-i"></i>
            </button>
        </form>
    </div>
    <div>
        <div class="products-div">
            {% if products.count == 0 %}
                <p style="font-size: 2em; text-align: center;">Məhsul tapılmadı</p>
            {% else %}
                {% for product in products %}
                <div class="prod_container">
                    <img src="{{product.image.url}}" alt="{{ product.name }}" class="product-img" />
                    <div class="prod_detail">
                        <div>
                            <h4>
                                {{ product.name }}
                            </h4>
                            <p>{{ product.price }} AZN</p>
                        </div>
                        <a href="{% url 'product_detail' product.slug %}">Ətraflı</a>
                    </div>
                </div>
                {% endfor %}
            {% endif %}
        </div>
    </div>
    <div class="pagination">
        {% if page_obj.has_previous %}
            <a href="{% url request.resolver_match.url_name %}?page={{ page_obj.previous_page_number }}{% for key,value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}"><span aria-hidden="true">&laquo;</span></a>
        {% endif %}
    
        {% for i in page_obj.paginator.page_range %}
            {% if page_obj.number == i %}
                <a href="#" class="active">{{ i }}</a>
            {% else %}
                <a href="{% url request.resolver_match.url_name %}?page={{ i }}{% for key,value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}">{{ i }}</a>
            {% endif %}
        {% endfor %}
    
        {% if page_obj.has_next %}
            <a href="{% url request.resolver_match.url_name %}?page={{ page_obj.next_page_number }}{% for key,value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}"><span aria-hidden="true">&raquo;</span></a>
        {% endif %}
    </div>
</div>
  {% endblock content %}